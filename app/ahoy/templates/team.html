<!-- team.html -->

{% extends "base.html" %}
{% load static %}

{% block title %}Csapatok{% endblock %}

{% block content %}
<div class="team-container">

  {% if show_senior_selection %}
    <form method="post" id="select-senior-form">
      {% csrf_token %}
      <label for="senior">Senior:</label>
      <select name="senior" id="senior">
        {% for user in senior_users %}
            {% if user.is_staff %}
                <option value="{{ user.id }}">{{ user.username }}</option>
            {% endif %}
        {% endfor %}
      </select>
      <button type="submit" name="select_senior">Mentés</button>
    </form>
  {% endif %}

  {% if request.user.is_superuser and not show_senior_selection %}
    <div class="team-card">
      <div class="team-card-header">
        <h2 class="team-card-title">Új csapat létrehozása</h2>
      </div>
      <div class="team-card-body">
        <form method="post">
          {% csrf_token %}
          {{ form.as_p }}

          {% if show_add_members %}
            <h3>Kit szeretne a csapatba belerakni?</h3>
            <form method="post" action="{% url 'finish_team_creation' %}">
              {% csrf_token %}
              <ul>
                {% for user in available_users %}
                  {% if user.id not in assigned_user_ids and not user.is_staff and not user.is_superuser %}
                    <li>
                      <label>
                        <input type="checkbox" name="selected_users" value="{{ user.id }}">
                        {{ user.username }}
                      </label>
                    </li>
                  {% endif %}
                {% endfor %}
              </ul>
              <button type="submit">Befejezés</button>
            </form>
          {% endif %}
        </form>
      </div>
    </div>
  {% endif %}
</div>
<link rel="stylesheet" href="{% static 'css/team.css' %}" type="text/css"/>
{% endblock %}
